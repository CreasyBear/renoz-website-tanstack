import{a as y,r as e,j as l}from"./main-BXBhTCRF.js";const C=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],I=y("chevron-up",C),L=e.forwardRef(({siteKey:c,onVerify:a,onError:u,onExpire:d,onReset:f,theme:w="auto",size:p="normal",className:T=""},b)=>{const o=e.useRef(null),r=e.useRef(null),[m,i]=e.useState(!1),[j,n]=e.useState(!0),h=e.useCallback(t=>{n(!1),a(t)},[a]),x=e.useCallback(()=>{n(!1),u?.()},[u]),g=e.useCallback(()=>{n(!1),d?.()},[d]),k=e.useCallback(()=>{n(!1),r.current&&window.turnstile&&(window.turnstile.reset(r.current),n(!0))},[]);return e.useImperativeHandle(b,()=>({reset:()=>{if(r.current&&window.turnstile)try{window.turnstile.reset(r.current),n(!0),f?.()}catch(t){console.error("Failed to reset Turnstile widget:",t)}}}),[f]),e.useEffect(()=>{if(window.turnstile){i(!0);return}if(document.querySelector('script[src="https://challenges.cloudflare.com/turnstile/v0/api.js"]')){const v=()=>{window.turnstile?i(!0):setTimeout(v,100)};v();return}const s=document.createElement("script");s.src="https://challenges.cloudflare.com/turnstile/v0/api.js",s.async=!0,s.defer=!0,s.onload=()=>i(!0),s.onerror=()=>{console.error("Failed to load Turnstile script"),n(!1)},document.head.appendChild(s)},[]),e.useEffect(()=>{if(!(!m||!window.turnstile||!o.current||r.current||!c)){try{const t=window.turnstile.render(o.current,{sitekey:c,callback:h,"error-callback":x,"expired-callback":g,"timeout-callback":k,theme:w,size:p});r.current=t}catch(t){console.error("Failed to render Turnstile widget:",t),n(!1)}return()=>{if(r.current&&window.turnstile){try{window.turnstile.remove(r.current)}catch(t){console.error("Failed to remove Turnstile widget:",t)}r.current=null}}}},[m,c,h,x,g,k,w,p]),l.jsxs("div",{className:T,children:[l.jsx("div",{ref:o}),j&&!r.current&&l.jsx("div",{className:"text-center text-sm text-gray-500 mt-2",children:"Loading verification..."})]})});L.displayName="Turnstile";export{I as C,L as T};

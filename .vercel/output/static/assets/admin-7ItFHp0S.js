import{r as t,j as e,B as a}from"./main-B8Z2gBQ9.js";import{C as i}from"./Card-BBGnlIhR.js";import{s as m}from"./supabase-CKr9iNV7.js";function v(){const[l,p]=t.useState([]),[d,h]=t.useState([]),[r,n]=t.useState("products"),[u,c]=t.useState(!0),x=t.useCallback(async()=>{c(!0);try{const[s,o]=await Promise.all([m.from("website_products").select("id, name, category, description, featured"),m.from("posts").select("id, title, slug, published")]);s.data&&p(s.data),o.data&&h(o.data)}catch(s){console.error("Error loading data:",s)}finally{c(!1)}},[]);return t.useEffect(()=>{x()},[x]),e.jsx("div",{className:"min-h-screen bg-[var(--cream)] py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h1",{className:"text-5xl font-bold mb-8",children:"CMS Admin"}),e.jsxs("div",{className:"flex gap-4 mb-8",children:[e.jsx("button",{onClick:()=>n("products"),className:`px-6 py-3 rounded-lg font-medium transition-colors ${r==="products"?"bg-[var(--renoz-green)] text-white":"bg-[var(--white)] text-[var(--text-primary)] hover:bg-gray-100"}`,children:"Products"}),e.jsx("button",{onClick:()=>n("posts"),className:`px-6 py-3 rounded-lg font-medium transition-colors ${r==="posts"?"bg-[var(--renoz-green)] text-white":"bg-[var(--white)] text-[var(--text-primary)] hover:bg-gray-100"}`,children:"Blog Posts"})]}),u?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-[var(--text-muted)]",children:"Loading..."})}):e.jsxs(e.Fragment,{children:[r==="products"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Products"}),e.jsx(a,{variant:"primary",children:"Add Product"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(s=>e.jsxs(i,{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-xl font-bold",children:s.name}),s.featured&&e.jsx("span",{className:"text-xs bg-[var(--renoz-green)] text-white px-2 py-1 rounded",children:"Featured"})]}),e.jsx("p",{className:"text-sm text-[var(--text-muted)] mb-2 capitalize",children:s.category}),e.jsx("p",{className:"text-sm text-[var(--text-muted)] mb-4 line-clamp-2",children:s.description||"No description"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",className:"flex-1",children:"Edit"}),e.jsx(a,{variant:"secondary",size:"sm",className:"flex-1",children:"Delete"})]})]},s.id))}),l.length===0&&e.jsx(i,{children:e.jsx("p",{className:"text-center text-[var(--text-muted)] py-8",children:"No products found. Add your first product to get started."})})]}),r==="posts"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Blog Posts"}),e.jsx(a,{variant:"primary",children:"Add Post"})]}),e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsx(i,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold",children:s.title}),s.published?e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Published"}):e.jsx("span",{className:"text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded",children:"Draft"})]}),e.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["/",s.slug]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",children:"Edit"}),e.jsx(a,{variant:"secondary",size:"sm",children:"Delete"})]})]})},s.id))}),d.length===0&&e.jsx(i,{children:e.jsx("p",{className:"text-center text-[var(--text-muted)] py-8",children:"No blog posts found. Add your first post to get started."})})]})]})]})})}export{v as component};

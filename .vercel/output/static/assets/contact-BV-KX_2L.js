import{c as ve,r as w,j as n,z as T,E as Te,s as Ce,t as De,n as V,a as le,B as xe,q as U,P as _e,F as Oe,G as Pe,C as Be,A as Re,o as $e,L as ze}from"./main-Di_5A93s.js";import{C as we}from"./Card-CQPy9sO9.js";import{T as qe,C as We,o as Ue,s as _}from"./Turnstile-Bk0_iUMR.js";import{V as Ge}from"./VerticalTimeline-B59oSvvt.js";import{H as Ke}from"./hard-hat-Czxf8ADV.js";import{B as He}from"./building-BXvqz91Q.js";import"./check-BR2wtvN-.js";const Ye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ze=ve("circle-question-mark",Ye);const Xe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Je=ve("clock",Xe);const Qe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],et=ve("user",Qe),$=new WeakMap,se=new WeakMap,ae={current:[]};let ce=!1,H=0;const K=new Set,Y=new Map;function Ae(s){const a=Array.from(s).sort((e,t)=>e instanceof k&&e.options.deps.includes(t)?1:t instanceof k&&t.options.deps.includes(e)?-1:0);for(const e of a){if(ae.current.includes(e))continue;ae.current.push(e),e.recompute();const t=se.get(e);if(t)for(const r of t){const i=$.get(r);i&&Ae(i)}}}function tt(s){const a={prevVal:s.prevState,currentVal:s.state};for(const e of s.listeners)e(a)}function st(s){const a={prevVal:s.prevState,currentVal:s.state};for(const e of s.listeners)e(a)}function Ne(s){if(H>0&&!Y.has(s)&&Y.set(s,s.prevState),K.add(s),!(H>0)&&!ce)try{for(ce=!0;K.size>0;){const a=Array.from(K);K.clear();for(const e of a){const t=Y.get(e)??e.prevState;e.prevState=t,tt(e)}for(const e of a){const t=$.get(e);t&&(ae.current.push(e),Ae(t))}for(const e of a){const t=$.get(e);if(t)for(const r of t)st(r)}}}finally{ce=!1,ae.current=[],Y.clear()}}function N(s){H++;try{s()}finally{if(H--,H===0){const a=K.values().next().value;a&&Ne(a)}}}function it(s){return typeof s=="function"}class he{constructor(a,e){this.listeners=new Set,this.subscribe=t=>{var r,i;this.listeners.add(t);const o=(i=(r=this.options)==null?void 0:r.onSubscribe)==null?void 0:i.call(r,t,this);return()=>{this.listeners.delete(t),o?.()}},this.prevState=a,this.state=a,this.options=e}setState(a){var e,t,r;this.prevState=this.state,(e=this.options)!=null&&e.updateFn?this.state=this.options.updateFn(this.prevState)(a):it(a)?this.state=a(this.prevState):this.state=a,(r=(t=this.options)==null?void 0:t.onUpdate)==null||r.call(t),Ne(this)}}class k{constructor(a){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const e=this.options.deps.length,t=new Array(e),r=new Array(e);for(let i=0;i<e;i++){const o=this.options.deps[i];t[i]=o.prevState,r[i]=o.state}return this.lastSeenDepValues=r,{prevDepVals:t,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var e,t;this.prevState=this.state;const r=this.getDepVals();this.state=this.options.fn(r),(t=(e=this.options).onUpdate)==null||t.call(e)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof k&&i.checkIfRecalculationNeededDeeply();let e=!1;const t=this.lastSeenDepValues,{currDepVals:r}=this.getDepVals();for(let i=0;i<r.length;i++)if(r[i]!==t[i]){e=!0;break}e&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const e of this._subscriptions)e()}),this.subscribe=e=>{var t,r;this.listeners.add(e);const i=(r=(t=this.options).onSubscribe)==null?void 0:r.call(t,e,this);return()=>{this.listeners.delete(e),i?.()}},this.options=a,this.state=a.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(a=this.options.deps){for(const e of a)if(e instanceof k)e.registerOnGraph(),this.registerOnGraph(e.options.deps);else if(e instanceof he){let t=$.get(e);t||(t=new Set,$.set(e,t)),t.add(this);let r=se.get(this);r||(r=new Set,se.set(this,r)),r.add(e)}}unregisterFromGraph(a=this.options.deps){for(const e of a)if(e instanceof k)this.unregisterFromGraph(e.options.deps);else if(e instanceof he){const t=$.get(e);t&&t.delete(this);const r=se.get(this);r&&r.delete(e)}}}var rt=class{constructor(s,a){this.fn=s,this.options=a,this.lastExecutionTime=0,this.isPending=!1,this.maybeExecute=(...e)=>{const t=Date.now()-this.lastExecutionTime;if(this.options.leading&&t>=this.options.wait)this.execute(...e);else if(this.lastArgs=e,!this.timeoutId&&this.options.trailing){const r=this.options.wait-t;this.isPending=!0,this.timeoutId=setTimeout(()=>{this.lastArgs!==void 0&&this.execute(...this.lastArgs)},r)}},this.execute=(...e)=>{this.fn(...e),this.options.onExecute?.(e,this),this.lastExecutionTime=Date.now(),this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.flush=()=>{this.isPending&&this.lastArgs&&this.execute(...this.lastArgs)},this.cancel=()=>{this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.clearTimeout=()=>{this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},this.options.leading===void 0&&this.options.trailing===void 0&&(this.options.leading=!0,this.options.trailing=!0)}};function at(s,a){return new rt(s,a).maybeExecute}class nt{#a=!0;#t;#e;#u;#s;#o;#i;#l;#h=0;#f=5;#n=!1;#c=!1;#r=null;#m=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#n=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(a=>this.emitEventToBus(a)),this.#s=[],this.stopConnectLoop(),this.#e().removeEventListener("tanstack-connect-success",this.#m)};#d=()=>{if(this.#h<this.#f){this.#h++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#e().removeEventListener("tanstack-connect",this.#d),this.#c=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#g=()=>{this.#n||(this.#n=!0,this.#e().addEventListener("tanstack-connect-success",this.#m),this.#d())};constructor({pluginId:a,debug:e=!1,enabled:t=!0,reconnectEveryMs:r=300}){this.#t=a,this.#a=t,this.#e=this.getGlobalTarget,this.#u=e,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#c=!1,this.#i=null,this.#l=r}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#l}ms)`),this.#i=setInterval(this.#d,this.#l))}stopConnectLoop(){this.#n=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...a){this.#u&&console.log(`ðŸŒ´ [tanstack-devtools:${this.#t}-plugin]`,...a)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const a=typeof EventTarget<"u"?new EventTarget:void 0;return typeof a>"u"||typeof a.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),a)}getPluginId(){return this.#t}dispatchCustomEventShim(a,e){try{const t=new Event(a,{detail:e});this.#e().dispatchEvent(t)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(a,e){try{this.#e().dispatchEvent(new CustomEvent(a,{detail:e}))}catch{this.dispatchCustomEventShim(a,e)}}emitEventToBus(a){this.debugLog("Emitting event to client bus",a),this.dispatchCustomEvent("tanstack-dispatch-event",a)}createEventPayload(a,e){return{type:`${this.#t}:${a}`,payload:e,pluginId:this.#t}}emit(a,e){if(!this.#a){this.debugLog("Event bus client is disabled, not emitting event",a,e);return}if(this.#r&&(this.debugLog("Emitting event to internal event target",a,e),this.#r.dispatchEvent(new CustomEvent(`${this.#t}:${a}`,{detail:this.createEventPayload(a,e)}))),this.#c){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(a,e)),typeof CustomEvent<"u"&&!this.#n&&(this.#g(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(a,e))}on(a,e,t){const r=t?.withEventTarget??!1,i=`${this.#t}:${a}`;if(r&&(this.#r||(this.#r=new EventTarget),this.#r.addEventListener(i,l=>{e(l.detail)})),!this.#a)return this.debugLog("Event bus client is disabled, not registering event",i),()=>{};const o=l=>{this.debugLog("Received event from bus",l.detail),e(l.detail)};return this.#e().addEventListener(i,o),this.debugLog("Registered event to bus",i),()=>{r&&this.#r?.removeEventListener(i,o),this.#e().removeEventListener(i,o)}}onAll(a){if(!this.#a)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const e=t=>{const r=t.detail;a(r)};return this.#e().addEventListener("tanstack-devtools-global",e),()=>this.#e().removeEventListener("tanstack-devtools-global",e)}onAllPluginEvents(a){if(!this.#a)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const e=t=>{const r=t.detail;this.#t&&r.pluginId!==this.#t||a(r)};return this.#e().addEventListener("tanstack-devtools-global",e),()=>this.#e().removeEventListener("tanstack-devtools-global",e)}}class ot extends nt{constructor(){super({pluginId:"form-devtools",reconnectEveryMs:1e3})}}const j=new ot;function oe(s,a){return typeof s=="function"?s(a):s}function Z(s,a){return be(a).reduce((t,r)=>{if(t===null)return null;if(typeof t<"u")return t[r]},s)}function X(s,a,e){const t=be(a);function r(i){if(!t.length)return oe(e,i);const o=t.shift();if(typeof o=="string"||typeof o=="number"&&!Array.isArray(i))return typeof i=="object"?(i===null&&(i={}),{...i,[o]:r(i[o])}):{[o]:r()};if(Array.isArray(i)&&typeof o=="number"){const l=i.slice(0,o);return[...l.length?l:new Array(o),r(i[o]),...i.slice(o+1)]}return[...new Array(o),r()]}return r(s)}function lt(s,a){const e=be(a);function t(r){if(!r)return;if(e.length===1){const o=e[0];if(Array.isArray(r)&&typeof o=="number")return r.filter((f,c)=>c!==o);const{[o]:l,...u}=r;return u}const i=e.shift();if((typeof i=="string"||typeof i=="number"&&!Array.isArray(r))&&typeof r=="object")return{...r,[i]:t(r[i])};if(typeof i=="number"&&Array.isArray(r)){if(i>=r.length)return r;const o=r.slice(0,i);return[...o.length?o:new Array(i),t(r[i]),...r.slice(i+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return t(s)}const ct=/^(\d+)$/gm,dt=/\.(\d+)(?=\.)/gm,ut=/^(\d+)\./gm,ht=/\.(\d+$)/gm,mt=/\.{2,}/gm,me="__int__",J=`${me}$1`;function be(s){if(Array.isArray(s))return[...s];if(typeof s!="string")throw new Error("Path must be a string.");return s.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(ct,J).replace(dt,`.${J}.`).replace(ut,`${J}.`).replace(ht,`.${J}`).replace(mt,".").split(".").map(a=>{if(a.startsWith(me)){const e=a.substring(me.length),t=parseInt(e,10);return String(t)===e?t:e}return a})}function ft(s){return!(Array.isArray(s)&&s.length===0)}function fe(s,a){const e=t=>t.validators.filter(Boolean).map(r=>({cause:r.cause,validate:r.fn}));return a.validationLogic({form:a.form,validators:a.validators,event:{type:s,async:!1},runValidation:e})}function ge(s,a){const{asyncDebounceMs:e}=a,{onBlurAsyncDebounceMs:t,onChangeAsyncDebounceMs:r,onDynamicAsyncDebounceMs:i}=a.validators||{},o=e??0,l=u=>u.validators.filter(Boolean).map(f=>{const c=f?.cause||s;let h=o;switch(c){case"change":h=r??o;break;case"blur":h=t??o;break;case"dynamic":h=i??o;break;case"submit":h=0;break}return s==="submit"&&(h=0),{cause:c,validate:f.fn,debounceMs:h}});return a.validationLogic({form:a.form,validators:a.validators,event:{type:s,async:!0},runValidation:l})}const pe=s=>!!s&&typeof s=="object"&&"fields"in s;function C(s,a){if(Object.is(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;if(s instanceof Date&&a instanceof Date)return s.getTime()===a.getTime();if(s instanceof Map&&a instanceof Map){if(s.size!==a.size)return!1;for(const[r,i]of s)if(!a.has(r)||!Object.is(i,a.get(r)))return!1;return!0}if(s instanceof Set&&a instanceof Set){if(s.size!==a.size)return!1;for(const r of s)if(!a.has(r))return!1;return!0}const e=Object.keys(s),t=Object.keys(a);if(e.length!==t.length)return!1;for(const r of e)if(!t.includes(r)||!C(s[r],a[r]))return!1;return!0}const Me=({newFormValidatorError:s,isPreviousErrorFromFormValidator:a,previousErrorValue:e})=>s?{newErrorValue:s,newSource:"form"}:a?{newErrorValue:void 0,newSource:void 0}:e?{newErrorValue:e,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},Se=({formLevelError:s,fieldLevelError:a})=>a?{newErrorValue:a,newSource:"field"}:s?{newErrorValue:s,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function F(s,a){return s==null?a:{...s,...a}}let O=256;const ie=[];let Q;for(;O--;)ie[O]=(O+256).toString(16).substring(1);function ke(){let s=0,a,e="";if(!Q||O+16>256){for(Q=new Array(256),s=256;s--;)Q[s]=256*Math.random()|0;s=0,O=0}for(;s<16;s++)a=Q[O+s],s===6?e+=ie[a&15|64]:s===8?e+=ie[a&63|128]:e+=ie[a],s&1&&s>1&&s<11&&(e+="-");return O++,e}const gt=at(s=>j.emit("form-state",{id:s.formId,state:s.store.state}),{wait:300}),B=s=>{if(!s.validators)return s.runValidation({validators:[],form:s.form});const a=s.event.async,e=a?void 0:{fn:s.validators.onMount,cause:"mount"},t={fn:a?s.validators.onChangeAsync:s.validators.onChange,cause:"change"},r={fn:a?s.validators.onBlurAsync:s.validators.onBlur,cause:"blur"},i={fn:a?s.validators.onSubmitAsync:s.validators.onSubmit,cause:"submit"},o=a?void 0:{fn:()=>{},cause:"server"};switch(s.event.type){case"mount":return s.runValidation({validators:[e],form:s.form});case"submit":return s.runValidation({validators:[t,r,i,o],form:s.form});case"server":return s.runValidation({validators:[],form:s.form});case"blur":return s.runValidation({validators:[r,o],form:s.form});case"change":return s.runValidation({validators:[t,o],form:s.form});default:throw new Error(`Unknown validation event type: ${s.event.type}`)}};function pt(s,a){const e=new Map;for(const t of s){const r=t.path??[];let i=a,o="";for(let l=0;l<r.length;l++){const u=r[l];if(u===void 0)continue;const f=typeof u=="object"?u.key:u,c=Number(f);Array.isArray(i)&&!Number.isNaN(c)?o+=`[${c}]`:o+=(l>0?".":"")+String(f),typeof i=="object"&&i!==null?i=i[f]:i=void 0}e.set(o,(e.get(o)??[]).concat(t))}return Object.fromEntries(e)}const Ve=(s,a)=>{const e=pt(s,a);return{form:e,fields:e}},z={validate({value:s,validationSource:a},e){const t=e["~standard"].validate(s);if(t instanceof Promise)throw new Error("async function passed to sync validator");if(t.issues)return a==="field"?t.issues:Ve(t.issues,s)},async validateAsync({value:s,validationSource:a},e){const t=await e["~standard"].validate(s);if(t.issues)return a==="field"?t.issues:Ve(t.issues,s)}},Ie=s=>!!s&&"~standard"in s,R={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function ee(s){function a(c,h,g){const m=o(c,h,"move",g),v=Math.min(h,g),b=Math.max(h,g);for(let d=v;d<=b;d++)m.push(i(c,d));const y=Object.keys(s.fieldInfo).reduce((d,p)=>(p.startsWith(i(c,h))&&d.set(p,s.getFieldMeta(p)),d),new Map);u(m,h<g?"up":"down"),Object.keys(s.fieldInfo).filter(d=>d.startsWith(i(c,g))).forEach(d=>{const p=d.replace(i(c,g),i(c,h)),M=y.get(p);M&&s.setFieldMeta(d,M)})}function e(c,h){const g=o(c,h,"remove");u(g,"up")}function t(c,h,g){o(c,h,"swap",g).forEach(v=>{if(!v.toString().startsWith(i(c,h)))return;const b=v.toString().replace(i(c,h),i(c,g)),[y,d]=[s.getFieldMeta(v),s.getFieldMeta(b)];y&&s.setFieldMeta(b,y),d&&s.setFieldMeta(v,d)})}function r(c,h){const g=o(c,h,"insert");u(g,"down"),g.forEach(m=>{m.toString().startsWith(i(c,h))&&s.setFieldMeta(m,f())})}function i(c,h){return`${c}[${h}]`}function o(c,h,g,m){const v=[i(c,h)];switch(g){case"swap":v.push(i(c,m));break;case"move":{const[b,y]=[Math.min(h,m),Math.max(h,m)];for(let d=b;d<=y;d++)v.push(i(c,d));break}default:{const b=s.getFieldValue(c),y=Array.isArray(b)?b.length:0;for(let d=h+1;d<y;d++)v.push(i(c,d));break}}return Object.keys(s.fieldInfo).filter(b=>v.some(y=>b.startsWith(y)))}function l(c,h){return c.replace(/\[(\d+)\]/,(g,m)=>{const v=parseInt(m,10);return`[${h==="up"?v+1:Math.max(0,v-1)}]`})}function u(c,h){(h==="up"?c:[...c].reverse()).forEach(m=>{const v=l(m.toString(),h),b=s.getFieldMeta(v);b?s.setFieldMeta(m,b):s.setFieldMeta(m,f())})}const f=()=>R;return{handleArrayMove:a,handleArrayRemove:e,handleArraySwap:t,handleArrayInsert:r}}function de(s){return{values:s.values??{},errorMap:s.errorMap??{},fieldMetaBase:s.fieldMetaBase??{},isSubmitted:s.isSubmitted??!1,isSubmitting:s.isSubmitting??!1,isValidating:s.isValidating??!1,submissionAttempts:s.submissionAttempts??0,isSubmitSuccessful:s.isSubmitSuccessful??!1,validationMetaMap:s.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}}}class Fe{constructor(a){this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{const e=this.fieldMetaDerived.mount(),t=this.store.mount(),r=this.store.subscribe(()=>{gt(this)}),i=j.on("request-form-state",c=>{c.payload.id===this._formId&&j.emit("form-api",{id:this._formId,state:this.store.state,options:this.options})}),o=j.on("request-form-reset",c=>{c.payload.id===this._formId&&this.reset()}),l=j.on("request-form-force-submit",c=>{c.payload.id===this._formId&&(this._devtoolsSubmissionOverride=!0,this.handleSubmit(),this._devtoolsSubmissionOverride=!1)}),u=()=>{l(),o(),i(),r(),e(),t(),j.emit("form-unmounted",{id:this._formId})};this.options.listeners?.onMount?.({formApi:this});const{onMount:f}=this.options.validators||{};return j.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}),f&&this.validateSync("mount"),u},this.update=e=>{if(!e)return;const t=this.options;this.options=e;const r=!!e.transform?.deps?.some((l,u)=>l!==this.prevTransformArray[u]),i=e.defaultValues&&!C(e.defaultValues,t.defaultValues)&&!this.state.isTouched,o=!C(e.defaultState,t.defaultState)&&!this.state.isTouched;!i&&!o&&!r||(N(()=>{this.baseStore.setState(()=>de(Object.assign({},this.state,o?e.defaultState:{},i?{values:e.defaultValues}:{},r?{_force_re_eval:!this.state._force_re_eval}:{})))}),j.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}))},this.reset=(e,t)=>{const{fieldMeta:r}=this.state,i=this.resetFieldMeta(r);e&&!t?.keepDefaultValues&&(this.options={...this.options,defaultValues:e}),this.baseStore.setState(()=>de({...this.options.defaultState,values:e??this.options.defaultValues??this.options.defaultState?.values,fieldMetaBase:i}))},this.validateAllFields=async e=>{const t=[];return N(()=>{Object.values(this.fieldInfo).forEach(i=>{if(!i.instance)return;const o=i.instance;t.push(Promise.resolve().then(()=>o.validate(e,{skipFormValidation:!0}))),i.instance.state.meta.isTouched||i.instance.setMeta(l=>({...l,isTouched:!0}))})}),(await Promise.all(t)).flat()},this.validateArrayFieldsStartingFrom=async(e,t,r)=>{const i=this.getFieldValue(e),o=Array.isArray(i)?Math.max(i.length-1,0):null,l=[`${e}[${t}]`];for(let h=t+1;h<=(o??0);h++)l.push(`${e}[${h}]`);const u=Object.keys(this.fieldInfo).filter(h=>l.some(g=>h.startsWith(g))),f=[];return N(()=>{u.forEach(h=>{f.push(Promise.resolve().then(()=>this.validateField(h,r)))})}),(await Promise.all(f)).flat()},this.validateField=(e,t)=>{const r=this.fieldInfo[e]?.instance;return r?(r.state.meta.isTouched||r.setMeta(i=>({...i,isTouched:!0})),r.validate(t)):[]},this.validateSync=e=>{const t=fe(e,{...this.options,form:this,validationLogic:this.options.validationLogic||B});let r=!1;const i={};return N(()=>{for(const u of t){if(!u.validate)continue;const f=this.runValidator({validate:u.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:c,fieldErrors:h}=re(f),g=G(u.cause),m=new Set([...Object.keys(this.state.fieldMeta),...Object.keys(h||{})]);for(const v of m){if(this.baseStore.state.fieldMetaBase[v]===void 0&&!h?.[v])continue;const b=this.getFieldMeta(v)??R,{errorMap:y,errorSourceMap:d}=b,p=h?.[v],{newErrorValue:M,newSource:S}=Me({newFormValidatorError:p,isPreviousErrorFromFormValidator:d?.[g]==="form",previousErrorValue:y?.[g]});S==="form"&&(i[v]={...i[v],[g]:p}),y?.[g]!==M&&this.setFieldMeta(v,(A=R)=>({...A,errorMap:{...A.errorMap,[g]:M},errorSourceMap:{...A.errorSourceMap,[g]:S}}))}this.state.errorMap?.[g]!==c&&this.baseStore.setState(v=>({...v,errorMap:{...v.errorMap,[g]:c}})),(c||h)&&(r=!0)}const o=G("submit");this.state.errorMap?.[o]&&e!=="submit"&&!r&&this.baseStore.setState(u=>({...u,errorMap:{...u.errorMap,[o]:void 0}}));const l=G("server");this.state.errorMap?.[l]&&e!=="server"&&!r&&this.baseStore.setState(u=>({...u,errorMap:{...u.errorMap,[l]:void 0}}))}),{hasErrored:r,fieldsErrorMap:i}},this.validateAsync=async e=>{const t=ge(e,{...this.options,form:this,validationLogic:this.options.validationLogic||B});this.state.isFormValidating||this.baseStore.setState(u=>({...u,isFormValidating:!0}));const r=[];let i;for(const u of t){if(!u.validate)continue;const f=G(u.cause);this.state.validationMetaMap[f]?.lastAbortController.abort();const h=new AbortController;this.state.validationMetaMap[f]={lastAbortController:h},r.push(new Promise(async g=>{let m;try{m=await new Promise((d,p)=>{setTimeout(async()=>{if(h.signal.aborted)return d(void 0);try{d(await this.runValidator({validate:u.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:h.signal},type:"validateAsync"}))}catch(M){p(M)}},u.debounceMs)})}catch(d){m=d}const{formError:v,fieldErrors:b}=re(m);b&&(i=i?{...i,...b}:b);const y=G(u.cause);for(const d of Object.keys(this.state.fieldMeta)){if(this.baseStore.state.fieldMetaBase[d]===void 0)continue;const p=this.getFieldMeta(d);if(!p)continue;const{errorMap:M,errorSourceMap:S}=p,A=i?.[d],{newErrorValue:I,newSource:P}=Me({newFormValidatorError:A,isPreviousErrorFromFormValidator:S?.[y]==="form",previousErrorValue:M?.[y]});M?.[y]!==I&&this.setFieldMeta(d,L=>({...L,errorMap:{...L.errorMap,[y]:I},errorSourceMap:{...L.errorSourceMap,[y]:P}}))}this.baseStore.setState(d=>({...d,errorMap:{...d.errorMap,[y]:v}})),g(i?{fieldErrors:i,errorMapKey:y}:void 0)}))}let o=[];const l={};if(r.length){o=await Promise.all(r);for(const u of o)if(u?.fieldErrors){const{errorMapKey:f}=u;for(const[c,h]of Object.entries(u.fieldErrors)){const m={...l[c]||{},[f]:h};l[c]=m}}}return this.baseStore.setState(u=>({...u,isFormValidating:!1})),l},this.validate=e=>{const{hasErrored:t,fieldsErrorMap:r}=this.validateSync(e);return t&&!this.options.asyncAlways?r:this.validateAsync(e)},this._handleSubmit=async e=>{this.baseStore.setState(i=>({...i,isSubmitted:!1,submissionAttempts:i.submissionAttempts+1,isSubmitSuccessful:!1})),N(()=>{Object.values(this.fieldInfo).forEach(i=>{i.instance&&(i.instance.state.meta.isTouched||i.instance.setMeta(o=>({...o,isTouched:!0})))})});const t=e??this.options.onSubmitMeta;if(!this.state.canSubmit&&!this._devtoolsSubmissionOverride){this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:t});return}this.baseStore.setState(i=>({...i,isSubmitting:!0}));const r=()=>{this.baseStore.setState(i=>({...i,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){r(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:t}),j.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validateAllFields",errors:Object.values(this.state.fieldMeta).map(i=>i.errors).flat()});return}if(await this.validate("submit"),!this.state.isValid){r(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:t}),j.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validate",errors:this.state.errors});return}N(()=>{Object.values(this.fieldInfo).forEach(i=>{i.instance?.options.listeners?.onSubmit?.({value:i.instance.state.value,fieldApi:i.instance})})}),this.options.listeners?.onSubmit?.({formApi:this,meta:t});try{await this.options.onSubmit?.({value:this.state.values,formApi:this,meta:t}),N(()=>{this.baseStore.setState(i=>({...i,isSubmitted:!0,isSubmitSuccessful:!0})),j.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!0}),r()})}catch(i){throw this.baseStore.setState(o=>({...o,isSubmitSuccessful:!1})),j.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"inflight",onError:i}),r(),i}},this.getFieldValue=e=>Z(this.state.values,e),this.getFieldMeta=e=>this.state.fieldMeta[e],this.getFieldInfo=e=>this.fieldInfo[e]||={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}},this.setFieldMeta=(e,t)=>{this.baseStore.setState(r=>({...r,fieldMetaBase:{...r.fieldMetaBase,[e]:oe(t,r.fieldMetaBase[e])}}))},this.resetFieldMeta=e=>Object.keys(e).reduce((t,r)=>{const i=r;return t[i]=R,t},{}),this.setFieldValue=(e,t,r)=>{const i=r?.dontUpdateMeta??!1,o=r?.dontRunListeners??!1,l=r?.dontValidate??!1;N(()=>{i||this.setFieldMeta(e,u=>({...u,isTouched:!0,isDirty:!0,errorMap:{...u?.errorMap,onMount:void 0}})),this.baseStore.setState(u=>({...u,values:X(u.values,e,t)}))}),o||this.getFieldInfo(e).instance?.triggerOnChangeListener(),l||this.validateField(e,"change")},this.deleteField=e=>{const r=[...Object.keys(this.fieldInfo).filter(i=>{const o=e.toString();return i!==o&&i.startsWith(o)}),e];this.baseStore.setState(i=>{const o={...i};return r.forEach(l=>{o.values=lt(o.values,l),delete this.fieldInfo[l],delete o.fieldMetaBase[l]}),o})},this.pushFieldValue=(e,t,r)=>{this.setFieldValue(e,i=>[...Array.isArray(i)?i:[],t],r)},this.insertFieldValue=async(e,t,r,i)=>{this.setFieldValue(e,l=>[...l.slice(0,t),r,...l.slice(t)],F(i,{dontValidate:!0}));const o=i?.dontValidate??!1;o||await this.validateField(e,"change"),ee(this).handleArrayInsert(e,t),o||await this.validateArrayFieldsStartingFrom(e,t,"change")},this.replaceFieldValue=async(e,t,r,i)=>{this.setFieldValue(e,l=>l.map((u,f)=>f===t?r:u),F(i,{dontValidate:!0})),(i?.dontValidate??!1)||(await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,t,"change"))},this.removeFieldValue=async(e,t,r)=>{const i=this.getFieldValue(e),o=Array.isArray(i)?Math.max(i.length-1,0):null;if(this.setFieldValue(e,u=>u.filter((f,c)=>c!==t),F(r,{dontValidate:!0})),ee(this).handleArrayRemove(e,t),o!==null){const u=`${e}[${o}]`;this.deleteField(u)}(r?.dontValidate??!1)||(await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,t,"change"))},this.swapFieldValues=(e,t,r,i)=>{this.setFieldValue(e,l=>{const u=l[t],f=l[r];return X(X(l,`${t}`,f),`${r}`,u)},F(i,{dontValidate:!0})),ee(this).handleArraySwap(e,t,r),(i?.dontValidate??!1)||(this.validateField(e,"change"),this.validateField(`${e}[${t}]`,"change"),this.validateField(`${e}[${r}]`,"change"))},this.moveFieldValues=(e,t,r,i)=>{this.setFieldValue(e,l=>{const u=[...l];return u.splice(r,0,u.splice(t,1)[0]),u},F(i,{dontValidate:!0})),ee(this).handleArrayMove(e,t,r),(i?.dontValidate??!1)||(this.validateField(e,"change"),this.validateField(`${e}[${t}]`,"change"),this.validateField(`${e}[${r}]`,"change"))},this.clearFieldValues=(e,t)=>{const r=this.getFieldValue(e),i=Array.isArray(r)?Math.max(r.length-1,0):null;if(this.setFieldValue(e,[],F(t,{dontValidate:!0})),i!==null)for(let l=0;l<=i;l++){const u=`${e}[${l}]`;this.deleteField(u)}(t?.dontValidate??!1)||this.validateField(e,"change")},this.resetField=e=>{this.baseStore.setState(t=>({...t,fieldMetaBase:{...t.fieldMetaBase,[e]:R},values:this.options.defaultValues?X(t.values,e,Z(this.options.defaultValues,e)):t.values}))},this.setErrorMap=e=>{N(()=>{Object.entries(e).forEach(([t,r])=>{const i=t;if(pe(r)){const{formError:o,fieldErrors:l}=re(r);for(const u of Object.keys(this.fieldInfo))this.getFieldMeta(u)&&this.setFieldMeta(u,c=>({...c,errorMap:{...c.errorMap,[i]:l?.[u]},errorSourceMap:{...c.errorSourceMap,[i]:"form"}}));this.baseStore.setState(u=>({...u,errorMap:{...u.errorMap,[i]:o}}))}else this.baseStore.setState(o=>({...o,errorMap:{...o.errorMap,[i]:r}}))})})},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((e,[t,r])=>(Object.keys(r).length&&r.errors.length&&(e[t]={errors:r.errors,errorMap:r.errorMap}),e),{})}),this.parseValuesWithSchema=e=>z.validate({value:this.state.values,validationSource:"form"},e),this.parseValuesWithSchemaAsync=e=>z.validateAsync({value:this.state.values,validationSource:"form"},e),this.timeoutIds={validations:{},listeners:{},formListeners:{}},this._formId=a?.formId??ke(),this._devtoolsSubmissionOverride=!1,this.baseStore=new he(de({...a?.defaultState,values:a?.defaultValues??a?.defaultState?.values})),this.fieldMetaDerived=new k({deps:[this.baseStore],fn:({prevDepVals:e,currDepVals:t,prevVal:r})=>{const i=r,o=e?.[0],l=t[0];let u=0;const f={};for(const c of Object.keys(l.fieldMetaBase)){const h=l.fieldMetaBase[c],g=o?.fieldMetaBase[c],m=i?.[c],v=Z(l.values,c);let b=m?.errors;if(!g||h.errorMap!==g.errorMap){b=Object.values(h.errorMap??{}).filter(S=>S!==void 0);const M=this.getFieldInfo(c)?.instance;M&&!M.options.disableErrorFlat&&(b=b.flat(1))}const y=!ft(b),d=!h.isDirty,p=C(v,Z(this.options.defaultValues,c))||C(v,this.getFieldInfo(c)?.instance?.options.defaultValue);if(m&&m.isPristine===d&&m.isValid===y&&m.isDefaultValue===p&&m.errors===b&&h===g){f[c]=m,u++;continue}f[c]={...h,errors:b??[],isPristine:d,isValid:y,isDefaultValue:p}}return Object.keys(l.fieldMetaBase).length&&i&&u===Object.keys(l.fieldMetaBase).length?i:f}}),this.store=new k({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:e,currDepVals:t,prevVal:r})=>{const i=r,o=e?.[0],l=t[0],u=t[1],f=Object.values(u).filter(Boolean),c=f.some(x=>x.isValidating),h=f.every(x=>x.isValid),g=f.some(x=>x.isTouched),m=f.some(x=>x.isBlurred),v=f.every(x=>x.isDefaultValue),b=g&&l.errorMap?.onMount,y=f.some(x=>x.isDirty),d=!y,p=!!(l.errorMap?.onMount||f.some(x=>x?.errorMap?.onMount)),M=!!c;let S=i?.errors??[];(!o||l.errorMap!==o.errorMap)&&(S=Object.values(l.errorMap).reduce((x,D)=>D===void 0?x:D&&pe(D)?(x.push(D.form),x):(x.push(D),x),[]));const A=S.length===0,I=h&&A,P=this.options.canSubmitWhenInvalid??!1,L=l.submissionAttempts===0&&!g&&!p||!M&&!l.isSubmitting&&I||P;let E=l.errorMap;if(b&&(S=S.filter(x=>x!==l.errorMap.onMount),E=Object.assign(E,{onMount:void 0})),i&&o&&i.errorMap===E&&i.fieldMeta===this.fieldMetaDerived.state&&i.errors===S&&i.isFieldsValidating===c&&i.isFieldsValid===h&&i.isFormValid===A&&i.isValid===I&&i.canSubmit===L&&i.isTouched===g&&i.isBlurred===m&&i.isPristine===d&&i.isDefaultValue===v&&i.isDirty===y&&C(o,l))return i;let q={...l,errorMap:E,fieldMeta:this.fieldMetaDerived.state,errors:S,isFieldsValidating:c,isFieldsValid:h,isFormValid:A,isValid:I,canSubmit:L,isTouched:g,isBlurred:m,isPristine:d,isDefaultValue:v,isDirty:y};const W=this.options.transform?.deps??[];if(W.length!==this.prevTransformArray.length||W.some((x,D)=>x!==this.prevTransformArray[D])){const x=Object.assign({},this,{state:q});this.options.transform?.fn(x),q=x.state,this.prevTransformArray=W}return q}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(a||{})}get state(){return this.store.state}get formId(){return this._formId}runValidator(a){return Ie(a.validate)?z[a.type](a.value,a.validate):a.validate(a.value)}handleSubmit(a){return this._handleSubmit(a)}}function re(s){if(s){if(pe(s)){const a=re(s.form).formError,e=s.fields;return{formError:a,fieldErrors:e}}return{formError:s}}return{formError:void 0}}function G(s){switch(s){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}class Ee{constructor(a){this.options={},this.mount=()=>{const e=this.store.mount();this.options.defaultValue!==void 0&&!this.getMeta().isTouched&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0});const t=this.getInfo();t.instance=this,this.update(this.options);const{onMount:r}=this.options.validators||{};if(r){const i=this.runValidator({validate:r,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});i&&this.setMeta(o=>({...o,errorMap:{...o?.errorMap,onMount:i},errorSourceMap:{...o?.errorSourceMap,onMount:"field"}}))}return this.options.listeners?.onMount?.({value:this.state.value,fieldApi:this}),e},this.update=e=>{if(this.options=e,this.name=e.name,!this.state.meta.isTouched&&this.options.defaultValue!==void 0){const t=this.form.getFieldValue(this.name);C(t,e.defaultValue)||this.form.setFieldValue(this.name,e.defaultValue,{dontUpdateMeta:!0,dontValidate:!0,dontRunListeners:!0})}this.form.getFieldMeta(this.name)||this.form.setFieldMeta(this.name,this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(e,t)=>{this.form.setFieldValue(this.name,e,F(t,{dontRunListeners:!0,dontValidate:!0})),t?.dontRunListeners||this.triggerOnChangeListener(),t?.dontValidate||this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=e=>this.form.setFieldMeta(this.name,e),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(e,t)=>{this.form.pushFieldValue(this.name,e,F(t,{dontRunListeners:!0})),t?.dontRunListeners||this.triggerOnChangeListener()},this.insertValue=(e,t,r)=>{this.form.insertFieldValue(this.name,e,t,F(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.replaceValue=(e,t,r)=>{this.form.replaceFieldValue(this.name,e,t,F(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.removeValue=(e,t)=>{this.form.removeFieldValue(this.name,e,F(t,{dontRunListeners:!0})),t?.dontRunListeners||this.triggerOnChangeListener()},this.swapValues=(e,t,r)=>{this.form.swapFieldValues(this.name,e,t,F(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.moveValue=(e,t,r)=>{this.form.moveFieldValues(this.name,e,t,F(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.clearValues=e=>{this.form.clearFieldValues(this.name,F(e,{dontRunListeners:!0})),e?.dontRunListeners||this.triggerOnChangeListener()},this.getLinkedFields=e=>{const t=Object.values(this.form.fieldInfo),r=[];for(const i of t){if(!i.instance)continue;const{onChangeListenTo:o,onBlurListenTo:l}=i.instance.options.validators||{};e==="change"&&o?.includes(this.name)&&r.push(i.instance),e==="blur"&&l?.includes(this.name)&&r.push(i.instance)}return r},this.validateSync=(e,t)=>{const r=fe(e,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||B}),o=this.getLinkedFields(e).reduce((f,c)=>{const h=fe(e,{...c.options,form:c.form,validationLogic:c.form.options.validationLogic||B});return h.forEach(g=>{g.field=c}),f.concat(h)},[]);let l=!1;N(()=>{const f=(c,h)=>{const g=te(h.cause),m=h.validate?je(c.runValidator({validate:h.validate,value:{value:c.store.state.value,validationSource:"field",fieldApi:c},type:"validate"})):void 0,v=t[g],{newErrorValue:b,newSource:y}=Se({formLevelError:v,fieldLevelError:m});c.state.meta.errorMap?.[g]!==b&&c.setMeta(d=>({...d,errorMap:{...d.errorMap,[g]:b},errorSourceMap:{...d.errorSourceMap,[g]:y}})),b&&(l=!0)};for(const c of r)f(this,c);for(const c of o)c.validate&&f(c.field,c)});const u=te("submit");return this.state.meta.errorMap?.[u]&&e!=="submit"&&!l&&this.setMeta(f=>({...f,errorMap:{...f.errorMap,[u]:void 0},errorSourceMap:{...f.errorSourceMap,[u]:void 0}})),{hasErrored:l}},this.validateAsync=async(e,t)=>{const r=ge(e,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||B}),i=await t,o=this.getLinkedFields(e),l=o.reduce((m,v)=>{const b=ge(e,{...v.options,form:v.form,validationLogic:v.form.options.validationLogic||B});return b.forEach(y=>{y.field=v}),m.concat(b)},[]),u=[],f=[],c=r.some(m=>m.validate)||l.some(m=>m.validate);if(c){this.state.meta.isValidating||this.setMeta(m=>({...m,isValidating:!0}));for(const m of o)m.setMeta(v=>({...v,isValidating:!0}))}const h=(m,v,b)=>{const y=te(v.cause);m.getInfo().validationMetaMap[y]?.lastAbortController.abort();const p=new AbortController;this.getInfo().validationMetaMap[y]={lastAbortController:p},b.push(new Promise(async M=>{let S;try{S=await new Promise((E,q)=>{this.timeoutIds.validations[v.cause]&&clearTimeout(this.timeoutIds.validations[v.cause]),this.timeoutIds.validations[v.cause]=setTimeout(async()=>{if(p.signal.aborted)return E(void 0);try{E(await this.runValidator({validate:v.validate,value:{value:m.store.state.value,fieldApi:m,signal:p.signal,validationSource:"field"},type:"validateAsync"}))}catch(W){q(W)}},v.debounceMs)})}catch(E){S=E}if(p.signal.aborted)return M(void 0);const A=je(S),I=i[this.name]?.[y],{newErrorValue:P,newSource:L}=Se({formLevelError:I,fieldLevelError:A});m.setMeta(E=>({...E,errorMap:{...E?.errorMap,[y]:P},errorSourceMap:{...E.errorSourceMap,[y]:L}})),M(P)}))};for(const m of r)m.validate&&h(this,m,u);for(const m of l)m.validate&&h(m.field,m,f);let g=[];if((u.length||f.length)&&(g=await Promise.all(u),await Promise.all(f)),c){this.setMeta(m=>({...m,isValidating:!1}));for(const m of o)m.setMeta(v=>({...v,isValidating:!1}))}return g.filter(Boolean)},this.validate=(e,t)=>{if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:r}=t?.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(e),{hasErrored:i}=this.validateSync(e,r[this.name]??{});if(i&&!this.options.asyncAlways)return this.getInfo().validationMetaMap[te(e)]?.lastAbortController.abort(),this.state.meta.errors;const o=t?.skipFormValidation?Promise.resolve({}):this.form.validateAsync(e);return this.validateAsync(e,o)},this.handleChange=e=>{this.setValue(e)},this.handleBlur=()=>{this.state.meta.isTouched||this.setMeta(t=>({...t,isTouched:!0})),this.state.meta.isBlurred||this.setMeta(t=>({...t,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.setErrorMap=e=>{this.setMeta(t=>({...t,errorMap:{...t.errorMap,...e}}))},this.parseValueWithSchema=e=>z.validate({value:this.state.value,validationSource:"field"},e),this.parseValueWithSchemaAsync=e=>z.validateAsync({value:this.state.value,validationSource:"field"},e),this.triggerOnChangeListener=()=>{const e=this.form.options.listeners?.onChangeDebounceMs;e&&e>0?(this.timeoutIds.formListeners.change&&clearTimeout(this.timeoutIds.formListeners.change),this.timeoutIds.formListeners.change=setTimeout(()=>{this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this})},e)):this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this});const t=this.options.listeners?.onChangeDebounceMs;t&&t>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},t)):this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},this.form=a.form,this.name=a.name,this.options=a,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new k({deps:[this.form.store],fn:({prevVal:e})=>{const t=e,r=this.form.getFieldMeta(this.name)??{...R,...a.defaultMeta};let i=this.form.getFieldValue(this.name);return!r.isTouched&&i===void 0&&this.options.defaultValue!==void 0&&!C(i,this.options.defaultValue)&&(i=this.options.defaultValue),t&&t.value===i&&t.meta===r?t:{value:i,meta:r}}})}get state(){return this.store.state}runValidator(a){return Ie(a.validate)?z[a.type](a.value,a.validate):a.validate(a.value)}triggerOnBlurListener(){const a=this.form.options.listeners?.onBlurDebounceMs;a&&a>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this})},a)):this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this});const e=this.options.listeners?.onBlurDebounceMs;e&&e>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})},e)):this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})}}function je(s){if(s)return s}function te(s){switch(s){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}const ne=typeof window<"u"?w.useLayoutEffect:w.useEffect;function vt(s){const[a,e]=w.useState(()=>({form:s.form,name:s.name})),[t,r]=w.useState(()=>new Ee({...s}));(a.form!==s.form||a.name!==s.name)&&(r(new Ee({...s})),e({form:s.form,name:s.name}));const i=T(t.store,s.mode==="array"?m=>Object.keys(m.value??[]).length:m=>m.value),o=T(t.store,m=>m.meta.isTouched),l=T(t.store,m=>m.meta.isBlurred),u=T(t.store,m=>m.meta.isDirty),f=T(t.store,m=>m.meta.errorMap),c=T(t.store,m=>m.meta.errorSourceMap),h=T(t.store,m=>m.meta.isValidating),g=w.useMemo(()=>{const v={...t,get state(){return{value:s.mode==="array"?t.state.value:i,get meta(){return{...t.state.meta,isTouched:o,isBlurred:l,isDirty:u,errorMap:f,errorSourceMap:c,isValidating:h}}}}};return v.Field=Le,v},[t,s.mode,i,o,l,u,f,c,h]);return ne(t.mount,[t]),ne(()=>{t.update(s)}),g}const Le=(({children:s,...a})=>{const e=vt(a),t=w.useMemo(()=>oe(s,e),[s,e]);return n.jsx(n.Fragment,{children:t})});function bt(){return w.useState(()=>ke())[0]}const yt=w.version.split(".")[0]==="17"?bt:w.useId;function xt({form:s,selector:a,children:e}){const t=T(s.store,a);return n.jsx(n.Fragment,{children:oe(e,t)})}function wt(s){const a=yt(),[e,t]=w.useState(s?.formId),[r,i]=w.useState(()=>new Fe({...s,formId:s?.formId??a}));if(e!==s?.formId){const l=s?.formId??a;i(new Fe({...s,formId:l})),t(l)}const o=w.useMemo(()=>{const l={...r,handleSubmit:((...u)=>r._handleSubmit(...u)),get formId(){return r._formId},get state(){return r.store.state}};return l.Field=function(f){return n.jsx(Le,{...f,form:r})},l.Subscribe=function(f){return n.jsx(xt,{form:r,selector:f.selector,children:f.children})},l},[r]);return ne(r.mount,[]),ne(()=>{r.update(s)}),o}function ye(s){return!s||typeof s!="string"?"":s.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim()}class Mt{attempts=new Map;isRateLimited(a,e=5,t=6e4){const r=Date.now(),o=(this.attempts.get(a)||[]).filter(l=>r-l<t);return o.length>=e?!0:(o.push(r),this.attempts.set(a,o),!1)}reset(a){this.attempts.delete(a)}}const St=new Mt;function Vt(){const s=new Uint8Array(32);return crypto.getRandomValues(s),Array.from(s,a=>a.toString(16).padStart(2,"0")).join("")}function ue(s,a){const e=[];let t=s;if(s==null)return a.required&&e.push("This field is required"),{isValid:e.length===0,value:s,errors:e};const r=String(s);return a.maxLength&&r.length>a.maxLength&&e.push(`Maximum length is ${a.maxLength} characters`),a.pattern&&!a.pattern.test(r)&&e.push("Invalid format"),a.sanitize&&typeof s=="string"&&(t=ye(s)),{isValid:e.length===0,value:t,errors:e}}function Ft(s){const{rateLimitKey:a="form-submit",csrfProtection:e=!0}=s,[t]=w.useState(()=>Vt()),[r,i]=w.useState("idle");return{secureSubmit:w.useCallback(async l=>{if(St.isRateLimited(a))throw new Error("Too many submissions. Please wait before trying again.");i("submitting");try{const u=Object.keys(l).reduce((c,h)=>{const g=l[h];return typeof g=="string"?c[h]=ye(g):c[h]=g,c},{}),f=e?{...u,_csrf:t}:u;s.onSubmit&&await s.onSubmit(f),i("success")}catch(u){throw i("error"),u}finally{i("idle")}},[a,e,t,s.onSubmit]),submitStatus:r,csrfToken:e?t:void 0}}const Et={email:s=>{const{isValid:a}=ue(s,{required:!0,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/});return a||"Please enter a valid email address"},required:(s="This field")=>a=>{const{isValid:e}=ue(a,{required:!0});return e||`${s} is required`},maxLength:(s,a="This field")=>e=>{const{isValid:t}=ue(e,{maxLength:s});return t||`${a} must be less than ${s} characters`},sanitize:s=>ye(s)},jt=Ue({name:_().min(1,"Please enter your full name so we can address you properly").max(100,"Name too long").regex(/^[^<>"'&]*$/,"Invalid characters in name"),email:_().min(5,"Email too short").max(254,"Email too long").regex(/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"Invalid email format").refine(s=>!s.includes("<")&&!s.includes(">")&&!s.includes('"'),"Invalid characters in email"),company:_().max(100,"Company name too long").regex(/^[^<>"'&]*$/,"Invalid characters in company name"),inquiry_type:_().min(1,"Please select an inquiry type"),message:_().min(10,"Please provide more details about your energy needs (minimum 10 characters)").max(2e3,"Message too long").regex(/^[^<>"'&]*$/,"Invalid characters in message"),turnstileToken:_().min(1,"Please complete the spam check"),website:_().max(0,"Spam detected")});function _t(){const s=Te.useSearch(),[a,e]=w.useState(null),t=w.useRef(null),{scrollYProgress:r}=Ce({target:t,offset:["start start","end end"]}),i=De(r,[0,1],["0%","30%"]),{secureSubmit:o,submitStatus:l}=Ft({rateLimitKey:"contact-form",csrfProtection:!0}),u=w.useRef(null),[f,c]=w.useState(!1),h=wt({defaultValues:{name:"",email:"",company:"",inquiry_type:s.type||"residential",message:"",turnstileToken:"",website:""},validators:{onSubmit:jt},onSubmit:async({value:d})=>{if(!f){c(!0);try{await o(d)}catch(p){if(p instanceof Error){if(p.message.includes("fetch")||p.message.includes("network"))throw new Error("Network connection failed. Please check your internet connection and try again.");if(p.message.includes("rate limit"))throw new Error("Too many submissions. Please wait a few minutes before trying again.")}throw p}finally{c(!1)}}}});w.useEffect(()=>{l==="success"&&(h.reset(),u.current?.reset())},[l,h]);const g=w.useId(),m=w.useId(),v=w.useId(),b=w.useId();w.useEffect(()=>{l==="success"&&u.current?.reset()},[l]);const y=[{q:"Where are RENOZ batteries manufactured?",a:"RENOZ battery systems are engineered and designed in Perth, Western Australia. We partner with world-class manufacturers to produce our systems to the highest standards. We are proud to be Perth's own battery OEM."},{q:"What is the warranty period?",a:"We offer a standard 10-year performance warranty on all our battery modules, guaranteeing at least 80% capacity retention after 6,000 cycles."},{q:"Do you sell directly to homeowners?",a:"We primarily work through a network of certified installers to ensure safe and compliant installation. However, you can contact us directly for a system sizing consultation, and we can recommend a local partner."},{q:"Are your systems compatible with existing solar setups?",a:"Yes, RENOZ systems are designed to be inverter-agnostic and can be retrofitted to most existing solar PV installations, including AC-coupled and DC-coupled configurations."}];return n.jsxs("div",{className:"min-h-screen bg-[var(--cream)]",ref:t,children:[n.jsxs("section",{className:"relative h-screen min-h-[600px] flex items-center overflow-hidden bg-[var(--black)] text-white",children:[n.jsxs(V.div,{className:"absolute inset-0 z-0",style:{y:i},children:[n.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-60",style:{backgroundImage:"url('/images/about/hero-wa-energy.webp')"}}),n.jsx("div",{className:"absolute inset-0 bg-black/40"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[var(--cream)] via-transparent to-transparent"})]}),n.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 z-10 w-full pt-10",children:n.jsxs(V.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[n.jsxs("h1",{className:"text-3xl md:text-5xl lg:text-6xl xl:text-7xl font-bold mb-6 tracking-tight text-white drop-shadow-lg",children:["Let's start a ",n.jsx("br",{})," conversation."]}),n.jsx(V.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"glass-dark p-6 md:p-8 rounded-2xl max-w-2xl border-l-4 border-[var(--renoz-green)] shadow-2xl mt-8",children:n.jsx("p",{className:"text-xl md:text-2xl text-zinc-100 font-normal leading-relaxed",children:"Whether you're a homeowner, installer, or developer, our Perth-based engineering team is ready to help."})})]})})]}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-24 -mt-24 relative z-20",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[n.jsx(V.div,{className:"lg:col-span-7",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:n.jsx(we,{className:"shadow-2xl border-none rounded-[32px] overflow-hidden bg-white p-8 md:p-10",children:n.jsxs("form",{onSubmit:d=>{d.preventDefault(),d.stopPropagation(),h.handleSubmit()},children:[n.jsx(h.Field,{name:"inquiry_type",children:d=>{const p=d.state.value,M=()=>p==="partnership"?"Apply for Trade Account":p==="commercial"?"Discuss Commercial Project":"Get Expert Advice",S=()=>p==="partnership"?"Join our partner network for wholesale pricing and direct engineering support.":p==="commercial"?"Tell us about your project requirements (capacity, voltage, application).":"Let us know your energy needs and we will connect you with a certified installer.";return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl mb-8",children:[n.jsxs("button",{type:"button",onClick:()=>d.handleChange("residential"),className:le("flex-1 flex items-center justify-center gap-2 py-3 rounded-lg text-sm font-bold transition-all",p==="residential"?"bg-white text-[var(--black)] shadow-sm":"text-gray-500 hover:text-gray-700"),children:[n.jsx(et,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Homeowner"})]}),n.jsxs("button",{type:"button",onClick:()=>d.handleChange("partnership"),className:le("flex-1 flex items-center justify-center gap-2 py-3 rounded-lg text-sm font-bold transition-all",p==="partnership"?"bg-white text-[var(--black)] shadow-sm":"text-gray-500 hover:text-gray-700"),children:[n.jsx(Ke,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Installer"})]}),n.jsxs("button",{type:"button",onClick:()=>d.handleChange("commercial"),className:le("flex-1 flex items-center justify-center gap-2 py-3 rounded-lg text-sm font-bold transition-all",p==="commercial"?"bg-white text-[var(--black)] shadow-sm":"text-gray-500 hover:text-gray-700"),children:[n.jsx(He,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Commercial"})]})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-[var(--black)] mb-2",children:M()}),n.jsx("p",{className:"text-gray-500",children:S()})]})]})}}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(h.Field,{name:"name",children:d=>n.jsxs("div",{children:[n.jsx("label",{htmlFor:g,className:"block text-xs font-bold uppercase tracking-wider mb-2 text-gray-500",children:"Name *"}),n.jsx("input",{id:g,value:d.state.value,onBlur:d.handleBlur,onChange:p=>d.handleChange(Et.sanitize(p.target.value)),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[var(--renoz-green)] focus:border-transparent outline-none transition-all placeholder:text-gray-400",placeholder:"John Doe",required:!0,maxLength:100,autoComplete:"name","aria-invalid":d.state.meta.errors.length>0,"aria-describedby":d.state.meta.errors.length>0?`${g}-error`:void 0}),d.state.meta.errors?n.jsx("p",{id:`${g}-error`,className:"text-red-500 text-sm mt-1",role:"alert","aria-live":"polite",children:d.state.meta.errors.join(", ")}):null]})}),n.jsx(h.Field,{name:"email",children:d=>n.jsxs("div",{children:[n.jsx("label",{htmlFor:m,className:"block text-xs font-bold uppercase tracking-wider mb-2 text-gray-500",children:"Email *"}),n.jsx("input",{id:m,type:"email",value:d.state.value,onBlur:d.handleBlur,onChange:p=>d.handleChange(p.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[var(--renoz-green)] focus:border-transparent outline-none transition-all placeholder:text-gray-400",placeholder:"john@example.com",maxLength:254,autoComplete:"email"}),d.state.meta.errors?n.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.state.meta.errors.join(", ")}):null]})})]}),n.jsx(h.Field,{name:"company",children:d=>n.jsx("div",{children:n.jsx(h.Subscribe,{selector:p=>[p.values.inquiry_type],children:([p])=>n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:v,className:"block text-xs font-bold uppercase tracking-wider mb-2 text-gray-500",children:p==="residential"?"Address (Optional)":"Company Name"}),n.jsx("input",{id:v,value:d.state.value,onBlur:d.handleBlur,onChange:M=>d.handleChange(M.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[var(--renoz-green)] focus:border-transparent outline-none transition-all placeholder:text-gray-400",placeholder:p==="residential"?"Your suburb or address":"Your business name",maxLength:100,autoComplete:p==="residential"?"address-line1":"organization"})]})})})}),n.jsx(h.Field,{name:"message",children:d=>n.jsxs("div",{children:[n.jsx("label",{htmlFor:b,className:"block text-xs font-bold uppercase tracking-wider mb-2 text-gray-500",children:"Message *"}),n.jsx("textarea",{id:b,rows:5,value:d.state.value,onBlur:d.handleBlur,onChange:p=>d.handleChange(p.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[var(--renoz-green)] focus:border-transparent outline-none transition-all resize-none placeholder:text-gray-400",placeholder:"Tell us about your project requirements...",maxLength:2e3}),d.state.meta.errors?n.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.state.meta.errors.join(", ")}):null]})}),l==="success"&&n.jsxs(V.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"p-4 bg-green-50 border border-green-200 rounded-xl text-green-800 flex items-center gap-3",role:"alert","aria-live":"polite","aria-atomic":"true",children:[n.jsx("div",{className:"w-6 h-6 bg-green-200 rounded-full flex items-center justify-center shrink-0","aria-hidden":"true",children:"âœ“"}),n.jsx("div",{children:"Thanks for reaching out! Our energy experts will respond within 24 hours with your custom solution."})]}),l==="error"&&n.jsx(V.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"p-4 bg-red-50 border border-red-200 rounded-xl text-red-800",role:"alert","aria-live":"assertive","aria-atomic":"true",children:"We encountered an issue sending your message. Please try again or contact us directly or call us directly."}),n.jsx(h.Field,{name:"website",children:d=>n.jsx("input",{type:"text",name:"website",value:d.state.value,onChange:p=>d.handleChange(p.target.value),style:{display:"none"},tabIndex:-1,autoComplete:"off","aria-hidden":"true"})}),n.jsx("div",{className:"pt-2",children:n.jsx(h.Field,{name:"turnstileToken",children:d=>n.jsxs(n.Fragment,{children:[n.jsx(qe,{ref:u,siteKey:"0x4AAAAAABHX5BtfeC3UIcgA",onVerify:p=>d.handleChange(p),onError:()=>d.handleChange(""),onReset:()=>d.handleChange(""),theme:"auto",size:"normal",className:"flex justify-center"}),d.state.meta.errors?n.jsx("p",{className:"text-red-500 text-sm mt-2 text-center",children:d.state.meta.errors.join(", ")}):null]})})}),n.jsxs("div",{className:"pt-4",children:[n.jsx(h.Subscribe,{selector:d=>[d.canSubmit],children:([d])=>n.jsxs(xe,{type:"submit",variant:"primary",size:"lg",className:"w-full rounded-xl py-4 text-lg shadow-lg shadow-[var(--renoz-green)]/20",disabled:!d||!1||l==="submitting"||f,"aria-describedby":"submit-status",children:[l==="submitting"?"Sending...":"Get Expert Advice",l!=="submitting"&&n.jsx(U,{className:"ml-2 w-5 h-5"})]})}),n.jsxs("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:[l==="submitting"&&"Sending your message...",l==="success"&&"Message sent successfully",l==="error"&&"Failed to send message"]})]})]})]})})}),n.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[n.jsxs(V.a,{href:"tel:1800736693",className:"block bg-[var(--black)] text-white rounded-[32px] p-8 shadow-xl hover:scale-[1.02] transition-transform duration-300 group relative overflow-hidden",initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.3},children:[n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-3xl -mr-10 -mt-10"}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsx("div",{className:"p-3 bg-white/10 rounded-[20px]",children:n.jsx(_e,{className:"w-6 h-6 text-[var(--renoz-green)]"})}),n.jsx(U,{className:"w-5 h-5 text-gray-500 group-hover:text-white transition-colors"})]}),n.jsx("p",{className:"text-sm text-gray-400 font-bold uppercase tracking-wider mb-1",children:"Call Us"}),n.jsx("p",{className:"text-3xl font-bold mb-4",children:"1800 736 693"}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[n.jsx(Je,{className:"w-4 h-4"}),n.jsx("span",{children:"Mon-Fri, 8am - 5pm AWST"})]})]})]}),n.jsxs(V.a,{href:"mailto:sales@renoz.energy",className:"block bg-white text-[var(--black)] rounded-[32px] p-8 shadow-soft hover:shadow-lg transition-all duration-300 group",initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.4},children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsx("div",{className:"p-3 bg-gray-100 rounded-[20px] group-hover:bg-[var(--renoz-green)]/10 transition-colors",children:n.jsx(Oe,{className:"w-6 h-6 text-[var(--black)] group-hover:text-[var(--renoz-green)] transition-colors"})}),n.jsx(U,{className:"w-5 h-5 text-gray-300 group-hover:text-[var(--black)] transition-colors"})]}),n.jsx("p",{className:"text-sm text-gray-400 font-bold uppercase tracking-wider mb-1",children:"Email Us"}),n.jsx("p",{className:"text-2xl font-bold break-all",children:"sales@renoz.energy"})]}),n.jsxs(V.div,{className:"bg-[var(--renoz-green)] text-white rounded-[32px] p-8 shadow-xl relative overflow-hidden",initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.5},children:[n.jsx("div",{className:"absolute inset-0 bg-[url('/images/noise.png')] opacity-10 mix-blend-overlay pointer-events-none"}),n.jsxs("div",{className:"relative z-10",children:[n.jsx(Pe,{className:"w-8 h-8 text-white mb-6"}),n.jsx("p",{className:"text-sm text-white/60 font-bold uppercase tracking-wider mb-1",children:"Head Office & Factory"}),n.jsxs("p",{className:"text-xl font-bold leading-tight",children:["Unit 4, 8 Murphy Street",n.jsx("br",{}),"O'Connor WA 6163"]}),n.jsx("div",{className:"mt-6 pt-6 border-t border-white/20",children:n.jsxs("a",{href:"https://maps.google.com/?q=8+Murphy+Street+O'Connor+WA",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm font-bold hover:text-white/80 transition-colors",children:["Get Directions ",n.jsx(U,{className:"w-4 h-4 ml-2"})]})})]})]})]})]}),n.jsx("div",{className:"mt-12 md:mt-20 lg:mt-32",children:n.jsxs(V.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},children:[n.jsx("div",{className:"md:hidden flex overflow-x-auto snap-x snap-mandatory gap-4 px-4 -mx-4 hide-scrollbar pb-8",children:[{title:"Initial Review",description:"Our admin team reviews your inquiry within 24 hours (Mon-Fri) and routes it to the correct department.",step:"01"},{title:"Technical Sizing",description:"For complex projects, our engineers may request additional info (switchboard photos, load profiles) to provide an accurate quote.",step:"02"},{title:"Connection",description:"We'll either provide a direct quote or introduce you to a certified local partner who can handle the installation.",step:"03"}].map((d,p)=>n.jsx("div",{className:"snap-center shrink-0 w-[85%] max-w-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm h-full flex flex-col",children:[n.jsx("div",{className:"text-4xl font-bold text-[var(--renoz-green)]/20 mb-4",children:d.step}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:d.title}),n.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:d.description})]})},p))}),n.jsx("div",{className:"hidden md:block",children:n.jsx(Ge,{title:"What happens next?",steps:[{title:"Initial Review",description:"Our admin team reviews your inquiry within 24 hours (Mon-Fri) and routes it to the correct department."},{title:"Technical Sizing (Optional)",description:"For complex projects, our engineers may request additional info (switchboard photos, load profiles) to provide an accurate quote."},{title:"Connection",description:"We'll either provide a direct quote or introduce you to a certified local partner who can handle the installation."}]})})]})}),n.jsxs("section",{className:"mt-12 md:mt-20 lg:mt-32 max-w-4xl mx-auto",children:[n.jsxs(V.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-16",children:[n.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-white rounded-full shadow-sm mb-4",children:n.jsx(Ze,{className:"w-6 h-6 text-[var(--renoz-green)]"})}),n.jsx("h2",{className:"text-3xl font-bold text-[var(--black)]",children:"Frequently Asked Questions"})]}),n.jsx("div",{className:"space-y-4",children:y.map((d,p)=>n.jsxs(V.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:p*.1},className:"bg-white rounded-[24px] overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[n.jsxs("button",{onClick:()=>e(a===p?null:p),className:"w-full flex justify-between items-center text-left font-bold text-[var(--black)] p-6 md:p-8",children:[n.jsx("span",{className:"text-lg",children:d.q}),a===p?n.jsx(We,{className:"w-5 h-5 text-[var(--renoz-green)] shrink-0 ml-4"}):n.jsx(Be,{className:"w-5 h-5 text-gray-400 shrink-0 ml-4"})]}),n.jsx(Re,{children:a===p&&n.jsx(V.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:n.jsx("div",{className:"px-6 pb-6 md:px-8 md:pb-8 text-zinc-600 font-normal leading-relaxed border-t border-gray-50 pt-4",children:d.a})})})]},p))})]}),n.jsx("section",{className:"mt-12 md:mt-20 lg:mt-32",children:n.jsx(V.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},children:n.jsxs(we,{className:"bg-gradient-to-br from-[var(--black)] to-gray-800 text-white p-12 md:p-16 rounded-[32px] border-none shadow-2xl relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-[url('/images/noise.png')] opacity-5 mix-blend-overlay pointer-events-none"}),n.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[var(--renoz-green)]/20 border border-[var(--renoz-green)]/30 mb-6",children:n.jsx($e,{className:"w-8 h-8 text-[var(--renoz-green)]"})}),n.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Already a RENOZ Customer?"}),n.jsx("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed",children:"Activate your 10-year replacement warranty in minutes. Simple online registration for peace of mind."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsxs(xe,{variant:"primary",size:"lg",to:"/warranty",className:"rounded-full px-8 shadow-glow",children:["Register Your Warranty",n.jsx(U,{className:"ml-2 w-5 h-5"})]}),n.jsx(ze,{to:"/resources",className:"inline-flex items-center justify-center px-8 py-4 text-white border-2 border-white/20 hover:border-white/40 rounded-full font-bold transition-all hover:bg-white/5",children:"View Resources"})]}),n.jsxs("p",{className:"text-sm text-gray-500 mt-6",children:["Need help? Email"," ",n.jsx("a",{href:"mailto:support@renoz.energy",className:"text-[var(--renoz-green)] hover:underline",children:"support@renoz.energy"})]})]})]})})})]})]})}export{_t as component};
